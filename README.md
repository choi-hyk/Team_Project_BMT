
# 2023-Team-Project

<div align="center">
  
![header](https://capsule-render.vercel.app/api?color=gradient&customColorList=0,2,4,5,30&text=2023_2_Team_Project&textColor=000000)

*íŒ€í”„ë¡œì íŠ¸ MJU_2023_2_BMT*

*FastëŠ” ì‚¬ìš©ìê°€ ì§€í•˜ì² ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. â€˜ìµœê³ ì˜ ì´ë™â€™ì´ë¼ëŠ” í‚¤ì›Œë“œì— ì´ˆì ì„ ë§ì¶”ì–´ ì‚¬ìš©ìì—ê²Œ ì–´í”Œ UI/UX ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í†µí•´ ì‚¬ìš©ì ë§ˆë‹¤ í¸í•œ êµ¬ì„±ì˜ ì•± ì‚¬ìš©ê³¼ ë‹¤ì–‘í•œ ê²½ë¡œë“¤ì„ ìµœë‹¨ ì‹œê°„, ìµœë‹¨ ê±°ë¦¬, ìµœì†Œë¹„ìš©, ì•± ì¶”ì²œ ê²½ë¡œë¥¼ ì•ˆë‚´í•˜ì—¬ ë³µì¡í•œ ì§€í•˜ì²  ì´ìš©ì— í¸ë¦¬í•¨ì„ ì œê³µí•´ì£¼ëŠ”ê²ƒê³¼ ì—­ ë‚´ í˜¼ì¡ë„ ì •ë³´ì œê³µ ë° ë¦¬ì›Œë“œ ì œê³µì´ ì£¼ê¸°ëŠ¥ì…ë‹ˆë‹¤.*

 *ë³¸ í”„ë¡œì íŠ¸ì˜ ê¸°ê°„ì€ ì„¤ê³„ í¬í•¨ 10ì£¼ì´ë©° ì´ ê¸°ê°„ ì•ˆì—ëŠ” ì„¤ê³„, ê°œë°œ, ê·¸ë¦¬ê³  í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹… ê³¼ì •ì´ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.*

![Fast2](https://github.com/choi-hyk/Team_Project_BMT/assets/73456884/57128559-623a-4d1b-a0c0-3e56e7be2313)

ğŸ˜º*ì‚¬ìš© ì–¸ì–´*ğŸ¶


*dart with flutter*


ğŸ˜º*Notion*ğŸ¶

*https://www.notion.so/Team_Project_1-9af4cee7f0124195835356ef3313e67a*

![Gmail](https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white)

*blindlchoil@gmail.com*

</div> 

# 1. í”„ë¡œì íŠ¸ ì„¸íŒ… ë°©ë²•

`**VScodeê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ê³  ê°€ì •í•˜ì˜€ì„ ë•Œì˜ í”„ë¡œì íŠ¸ ì„¸íŒ… ë°©ë²•**`

1. **VScodeì—ì„œ í™•ì¥ í”„ë¡œê·¸ë¨ Flutter, Dart ì„¤ì¹˜**
- Chocolateyë¥¼ ì´ìš©í•œ Flutter SDK í™˜ê²½ ë³€ìˆ˜ ë° ìë™ ì„¤ì¹˜:
Powershellì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ ë° Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('[https://community.chocolatey.org/install.ps1](https://community.chocolatey.org/install.ps1)')) ì…ë ¥
- ì„¤ì¹˜ í™•ì¸ í›„ choco install flutter

1. **ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ ì„¤ì¹˜**
AVD Managerë¥¼ í†µí•´ ì—ë®¬ë ˆì´í„° ìƒì„±
ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—ë®¬ë ˆì´í„°ì—ì„œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤

1. **Powershellì—ì„œ Flutter, Dart, Android studio ë“±íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸: flutter docor** 

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/c622600c-8199-4b58-b7b8-fa81eb80ddab)

Issueê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì´ìŠˆë¥¼ ì»¤ë§¨ë“œì— ì„¤ì¹˜

1. **ì—ë®¬ë ˆì´í„° ìƒì„±**
- AVD Manager â†’ Create Virtual Device â†’ í•˜ë“œì›¨ì–´: Galaxy S21 â†’ System Image: API34 â†’ Finish (No skin)
    
![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/c344b90f-1ff1-4380-a08b-4f9f78090ed2)
    
1. **í”„ë¡œì íŠ¸ ì‹¤í–‰**

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/1f101fd4-0a15-4bc9-a395-3a8520247a51)

vscodeì— í„°ë¯¸ë„ì—ì„œ flutter pub getì„ ì…ë ¥í•˜ì—¬ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/443d84a7-ea29-4ccb-93a3-09cc880a9dc1)


Select Deviceë¥¼ ì„ íƒ

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/42bad135-ec20-42b7-b29a-2cc89fb7eb46)


í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” Device ëª©ë¡

í˜„ì¬ ì„¤ì¹˜ëœ ì—ë®¬ë ˆì´í„°: Pixel 2 XL API 34ë¥¼ ì„ íƒ

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/372a766b-110c-49fb-96c4-ad6394b961a6)


Dart & Flutterë¥¼ ì„ íƒ

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/087e42ae-2469-4b73-a089-d7070974a80b)


ë‘ ë²ˆì§¸ ì—ë®¬ë ˆì´í„°ë¡œ ë””ë²„ê¹… ì‹¤í–‰

![Untitled](https://github.com/choi-hyk/Team_Project_BMT/assets/144649271/0173fa32-2429-4e9b-aaff-95d3b254bed7)


ì²« ì‹¤í–‰ í™”ë©´

---

# 2. FLutter ê¸°ë³¸ êµ¬ì„±

flutterëŠ” ìœ„ì ¯í˜•ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í”„ë ˆì„ ì›Œí¬ì…ë‹ˆë‹¤.

```dart
class ProvReward extends StatefulWidget {
  const ProvReward({super.key});

  @override
  State<ProvReward> createState() => _ProvRewardState();
}
```

ë¨¼ì € í˜ì´ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ì„¤ì •í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ì •ê°€ëŠ¥í•©ë‹ˆë‹¤ ìœ„ì˜ ProvRewardëŠ” ë”°ë¡œ ë§¤ê°œë³€ìˆ˜ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```dart
class _ProvRewardState extends State<ProvReward> {
  @override
  void initState() {
    super.initState();
    currentUI = 'home';
    _updateUserPointAfterDelay();
  }

  void _updateUserPointAfterDelay() async {
    await Future.delayed(const Duration(seconds: 3), () async {
      // ìœ ì € ì•„ì´ë””ì— 100 í¬ì¸íŠ¸ ì¶”ê°€
      UserProvider userProvider =
          Provider.of<UserProvider>(context, listen: false);
      userProvider.addPointsToUser();
      // ìœ ì € ì•„ì´ë””ì— í˜¼ì¡ë„ ì œë³´ 1 ì¶”ê°€
      userProvider.addCountToUser();
      // 3ì´ˆ í›„ì— í™”ë©´ ì „í™˜
      _navigateToBack();
    });
  }

  void _navigateToBack() {
    Navigator.pop(context);
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    // UserProviderì—ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    final userProvider = Provider.of<UserProvider>(context, listen: false);
    userProvider.fetchUserInfo();
    // ignore: deprecated_member_use
    return WillPopScope(

     .....

     ....
      
     );
  }
}
```

ìœ„ì˜ Stateí´ë˜ìŠ¤ëŠ” ì‹¤ì§ì ìœ¼ë¡œ ìœ„ì ¯ì— í•„ìš”í•œ ë©”ì†Œë“œì™€ ìœ„ì ¯ì˜ êµ¬ì„±ìš”ì†Œë¥¼ ì„¤ì •í•˜ëŠ” í”„ë ˆì„ íŒŒíŠ¸ì…ë‹ˆë‹¤.  ë”°ë¼ì„œ  @override
  Widget build(BuildContext context) {

ì´ë¶€ë¶„ ë°‘ì—ìˆëŠ” ì½”ë“œë“¤ì€ í™”ë©´ìƒì˜ ìš”ì†Œë¥¼ ì„¤ì •í•œ í”„ë ˆì„ ì½”ë“œì…ë‹ˆë‹¤. 

```dart
                       Container(
                              width: 40.0,
                              height: 40.0,
                              decoration: BoxDecoration(
                                borderRadius: BorderRadius.circular(10.0),
                                color: currentUI == 'home'
                                    ? Theme.of(context).primaryColorDark
                                    : Theme.of(context).primaryColor,
                              ),
                              child: IconButton(
                                onPressed: () {
                                  setState(() {
                                    current_trans = 0;
                                    currentUI = 'home';
                                    Navigator.pushReplacement(
                                      context,
                                      MaterialPageRoute(
                                          builder: (context) => const Menu()),
                                    );
                                  });
                                },
                                icon: const Icon(Icons.home),
                              ),
                            ),
```

í”ŒëŸ¬í„°ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ë¡œ ìš”ì†Œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ìœ„ì˜ ContainerëŠ” í™”ë©´ì— ë°•ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì´ê³  ìœ„ì ¯ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ childìš”ì†Œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

---


## UIí…Œë§ˆ ìƒ‰ êµ¬ì„±

[í˜¸ì„ ]

-1  : Color.fromARGB(255, 225, 213, 213)

1 : Colors.green;

2 : Color.fromARGB(255, 14, 67, 111)

3 : Colors.brown

4 : Colors.red

5 : Color.fromARGB(255, 24, 99, 134)

6 : Color.fromARGB(255, 218, 206, 95)

7 : Color.fromARGB(255, 115, 216, 118)

8 : Color.fromARGB(255, 54, 181, 240)

9 : Colors.purple;

ê¸°ë³¸ê°’ : Colors.white;


[í…Œë§ˆ]

primaryColorLight: Color.fromARGB(255, 117, 154, 167)

primaryColor: Color.fromARGB(255, 108, 159, 164)

primaryColorDark: Color.fromARGB(255, 22, 73, 79)

cardColor: Color.fromARGB(255, 233, 255, 243)


---

# 3. ë°ì´í„° ë° ë°ì´í„° ë©”ì†Œë“œ

## 1. Linesì»¬ë ‰ì…˜ : ì—­ ì •ë³´

Linesì»¬ë ‰ì…˜ â†’ ì´ 9ê°œì˜ ë‹¤íë¨¼íŠ¸ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.  

ë‹¤íë¨¼íŠ¸ : Line1 ~ Line2 ê° í˜¸ì„ ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ê° ë‹¤íë¨¼íŠ¸ì—ëŠ” í•„ë“œê°’ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

station : ì—­ ì´ë¦„

time, cost, optinum : ê°€ì¤‘ì¹˜

cStore, nRoom : í¸ì˜ì‹œì„¤

transfer : í™˜ìŠ¹ ì—¬ë¶€

ê° í•„ë“œëŠ” Listí˜•ì‹ìœ¼ë¡œ ê°’ì´ ë“¤ì–´ê°€ ìˆìŠµë‹ˆë‹¤.

stationì€ ê° í˜¸ì„ ì˜ ê°€ì¥ ì‘ì€ ìˆ˜ì˜ ì—­ë¶€í„° í˜¸ì„  ëì—­ê¹Œì§€ ë°°ì—´ì— ì €ì¥ë˜ì–´ìˆìŠµë‹ˆë‹¤.

ì˜ˆ) 1í˜¸ì„  Line1 ë‹¤íë¨¼íŠ¸ â†’ station = [101, 102, 103, 104, â€¦ , 123]

sation[n] â†’ station[n + 1] ì¼ë•Œ ë‘ ì—­ì˜ ì‚¬ì´ì˜ ì‹œê°„ ê°€ì¤‘ì¹˜ê°’ì€ time[n]ì´ ë©ë‹ˆë‹¤.

ìˆœí™˜í˜¸ì„ ì¸ 1í˜¸ì„ ê³¼ 6í˜¸ì„ ì¸ ê²½ìš° ì²« ì—­ê³¼ ë ì—­ì´ ì´ì–´ì§€ë¯€ë¡œ ê°€ì¤‘ì¹˜ í•„ë“œì™€ stationí•„ë“œì˜ ë°°ì—´ ìˆ˜ê°€ ê°™ìŠµë‹ˆë‹¤

ë¹„ìˆœí™˜ í˜¸ì„ ë“¤ì€ ê°€ì¤‘ì¹˜ì˜ ê°œìˆ˜ê°€ stationí•„ë“œì˜ ë°°ì—´ ìˆ˜ë³´ë‹¤ 1 ì ìŠµë‹ˆë‹¤.

 nRoomê³¼ cStoreëŠ” boolí˜•ì‹ìœ¼ë¡œ ë°°ì—´ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

station[n] ì— í•´ë‹¹í•˜ëŠ” ì—­ì´ ìˆ˜ìœ ì‹¤ì„ ê°€ì§€ê³  ìˆì„ ê²½ìš° nRoom[n] = trueê°€ ë©ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ trasnferëŠ” í•´ë‹¹ ì—­ì˜ í™˜ìŠ¹ê°€ëŠ¥ í˜¸ì„ ì…ë‹ˆë‹¤.

Lines1ì˜ 101ì—­ì€ 2í˜¸ì„ ìœ¼ë¡œ í™˜ìŠ¹ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë•Œ sation[0] = 101ì´ê³   trasfer[0] = 2ê°€ë©ë‹ˆë‹¤. ì´ë•Œ 2ëŠ” 2í˜¸ì„ ìœ¼ë¡œ í™˜ìŠ¹ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ Lines2ì—ë„ 101ì—­ì´ ì¡´ì¬í•˜ê³  101ì—­ì˜ ë°°ì—´ ìœ„ì¹˜ì— í•´ë‹¹í•˜ëŠ”  trasferëŠ” 1í˜¸ì„ ìœ¼ë¡œ í™˜ìŠ¹ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ 1ì´ ë©ë‹ˆë‹¤.

# Graphí´ë˜ìŠ¤ì˜ makeGraphë©”ì†Œë“œ

```dart
void makeGraph(List<Map<String, dynamic>> documentDataList, String weight) {
    for (int i = 0; i < 9; i++) {
      for (int j = 0; j < documentDataList[i]['station'].length - 1; j++) {
        addEdge(
            documentDataList[i]['station'][j],
            documentDataList[i]['station'][j + 1],
            documentDataList[i][weight][j]);
      }
    }
    addEdge(
        documentDataList[0]['station']
            [documentDataList[0]['station'].length - 1],
        documentDataList[0]['station'][0],
        documentDataList[0][weight][documentDataList[0]['station'].length - 1]);
    addEdge(
        documentDataList[5]['station']
            [documentDataList[5]['station'].length - 1],
        documentDataList[5]['station'][0],
        documentDataList[5][weight][documentDataList[5]['station'].length - 1]);
  }
```

ìœ„ í•¨ìˆ˜ì—ì„œ ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ê²Œ ë©ë‹ˆë‹¤. ì–‘ë°©í–¥ ê·¸ë˜í”„ë¡œ ê·¸ë¦¬ëŠ” ë¡œì§ì´ê³  ìˆœí™˜í˜¸ì„ ì¸ 1í˜¸ì„ ê³¼ 6í˜¸ì„ ì˜ ì²«ë²ˆì§¸ ì—­ê³¼ ë‘ë²ˆì§¸ì—­ë§Œ ì˜ˆì™¸ì²˜ë¦¬í•˜ì—¬ ì—°ê²°ì„ í•˜ì˜€ìŠµë‹ˆë‹¤. addEdgeì— ë§¤ê°œë³€ìˆ˜ë¡œ ì´ì–´ì§€ëŠ” ë‘ê°œì˜ ì—­ê³¼ ì‚¬ì´ì˜ ê°€ì¤‘ì¹˜ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì•±ì—ì„œëŠ” ì´ 3ê°œì˜ ê°€ì¤‘ì¹˜ë§Œ ë‹¤ë¥¸ ê·¸ë˜í”„ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.

# DataProviderí´ë˜ìŠ¤ì˜ searchDataë©”ì†Œë“œ

```dart
Future<void> searchData(int searchStation) async {
    await fetchDocumentList();
    found = false;
    name = "";
    nRoom = false;
    cStore = false;
    isBkmk = false;
    line.clear();
    nName.clear();
    pName.clear();
    for (int i = 0; i < 9; i++) {
      int leng = documentDataList[i]['station'].length;
      for (int j = 0; j < leng; j++) {
        if (documentDataList[i]['station'][j] == searchStation) {
          name = documentDataList[i]['station'][j].toString();
          nRoom = documentDataList[i]['nRoom'][j];
          cStore = documentDataList[i]['cStore'][j];
          line.add(i + 1);
          //ìˆœí™˜í•˜ëŠ” í˜¸ì„ ì¸ 1í˜¸ì„ ê³¼ 6í˜¸ì„  ì²˜ë¦¬ ê³¼ì •
          //ìˆœí™˜í•˜ëŠ” í˜¸ì„ ì´ë©´ ë§¨ì²˜ìŒ ì—­ê³¼ ë§ˆì§€ë§‰ì—­ì„ ì´ì–´ì¤˜ì•¼í•¨
          if (i == 0 || i == 5) {
            if (j == 0) {
              nName.add(documentDataList[i]['station'][j + 1].toString());
              pName.add(documentDataList[i]['station'][leng - 1].toString());
            } else if (j == leng - 1) {
              nName.add(documentDataList[i]['station'][0].toString());
              pName.add(documentDataList[i]['station'][j - 1].toString());
            } else {
              nName.add(documentDataList[i]['station'][j + 1].toString());
              pName.add(documentDataList[i]['station'][j - 1].toString());
            }
            //ìˆœí™˜í•˜ì§€ ì•ŠëŠ” í˜¸ì„ ì¸ ê²½ìš°
          } else {
            if (j == 0) {
              nName.add(documentDataList[i]['station'][j + 1].toString());
              pName.add("ì¢…ì ì—­");
            } else if (j == leng - 1) {
              nName.add("ì¢…ì ì—­");
              pName.add(documentDataList[i]['station'][j - 1].toString());
            } else {
              nName.add(documentDataList[i]['station'][j + 1].toString());
              pName.add(documentDataList[i]['station'][j - 1].toString());
            }
          }
          found = true;
          isBkmk = await userProvider.isStationBookmarked(name);
          current_trans = 0;
          break;
        }
      }
    }
  }
}
```

í•´ë‹¹ ë¡œì§ì€ ì—­ì˜ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë¡œì§ ì…ë‹ˆë‹¤.searchStationì— ê²€ìƒ‰í•  ì—­ ì´ë¦„ì´ ë“¤ì–´ê°€ê³  ê° ì—­ ìˆ«ìê°€ ì¦ê°€í•˜ëŠ” ë°©í–¥ì— ìˆëŠ” ë‹¤ìŒì—­ì„ nName  ê°ì†Œí•˜ëŠ” ë°©í–¥ì— ìˆëŠ” ì—­ì„ pNameìœ¼ë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤. 

ì˜ˆ) 123 â†’ 101 â†’ 102 

101ê²€ìƒ‰    nName[0] = 102, pName[0] = 123

lineì€ í™˜ìŠ¹ê°€ëŠ¥ í˜¸ì„ ì…ë‹ˆë‹¤. 101ì—­ì˜ ê²½ìš° 1í˜¸ì„ ê³¼ 2í˜¸ì„ ì— ì¡´ì¬í•˜ë¯€ë¡œ ì‘ì€ ìˆ˜ì˜ í˜¸ì„ ë¶€í„° lineì— ì €ì¥ë©ë‹ˆë‹¤. 

101ê²€ìƒ‰ì‹œ â†’ line[0] = 1, line[1] = 2

ì´ë•Œ nName[1] ì€ 2í˜¸ì„ ì—ì„œ ë‹¤ìŒ ì—­ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤ ì¦‰ 101ì˜ nName[1] = 201ì´ ë©ë‹ˆë‹¤. ì´ë•Œ 101ì—­ì€  2í˜¸ì„ ì—ì„œ ì¢…ì ì—­ì´ë¯€ë¡œ pName[1] =  nullì´ë©ë‹ˆë‹¤.

## 2. Congestionì»¬ë ‰ì…˜ : í˜¼ì¡ë„ ì •ë³´

ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” í˜¼ì¡ë„ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.

## Congestioní´ë˜ìŠ¤ì˜  addCongestionDataë©”ì†Œë“œ

```dart
Future<void> addCongestionData(int congestionLevel) async {
    try {
      int station = int.parse(widget.currentStaion);
      int line = widget.line;
      int next = int.parse(widget.linkStaion);
      int hour = currentHour;
      int minute = getMinuteRange(currentMinute);

      // Firestoreì— ë°ì´í„° ì¶”ê°€
      await _firestore.collection('Congestion').add({
        'station': station,
        'line': line,
        'next': next,
        'hour': hour,
        'minute': minute,
        'cong': congestionLevel,
      });

      print('Congestion data added successfully');
    } catch (e) {
      print('Error adding congestion data: $e');
    }
  }
```

ìœ„ì˜ congestionLevelì„ ì„ íƒí•´ì„œ í˜¼ì¡ë„ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í˜¼ì¡ë„ëŠ” 0~4ê°€ ì¡´ì¬í•˜ë©° í˜¼ì¡ë„ì™€ ê°™ì´ í•´ë‹¹ ì—­ì˜ í˜¸ì„  ë‹¤ìŒ ì—­ í˜„ì¬ ì‹œê°„(hour), ë¶„(miute)ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë•Œ ë¶„ì€ 0ë¶„ ~ 19ë¶„ì¼ë•Œ 1ì„

20ë¶„ ~ 39ë¶„ì¼ë•Œ 2ë¥¼ 40ë¶„ ~ 59ë¶„ì¼ë•Œ 3ì„ í• ë‹¹í•˜ì—¬ 20ë¶„ ë‹¨ìœ„ë¡œ í˜¼ì¡ë„ ì •ë³´ë¥¼ ë‚˜ëˆ ì„œ ì œê³µí•©ë‹ˆë‹¤.

ì‚¬ìš©ìê°€ 18ì‹œ 23ë¶„ì— 101ì—­ì—ì„œ 102ì—­ìœ¼ë¡œ ê°€ëŠ” ë°©í–¥ì—ì„œ 4ì˜ í˜¼ì¡ë„ë¥¼ ì œê³µí•˜ë©´ 

 line = 1
next = 102
hour = 18
minute = 2

station = 101

cong = 4 

ìœ„ 6ê°œì˜ ë°ì´í„°ë¥¼ Congestionì»¬ë ‰ì…˜ì— ì „ë‹¬í•©ë‹ˆë‹¤.
ì±„

## Congestioní´ë˜ìŠ¤ì˜ getCongestionData

```dart
Future<int> getCongestionData(int link) async {
    int station = int.parse(widget.name);
    int next = link;
    int line = widget.line[current_trans];
    int hour = currentHour;
    int minute = getMinuteRange(currentMinute);

    CollectionReference congestionCollection =
        FirebaseFirestore.instance.collection('Congestion');

    QuerySnapshot snapshot = await congestionCollection
        .where('station', isEqualTo: station)
        .where('next', isEqualTo: next)
        .where('line', isEqualTo: line)
        .where('hour', isEqualTo: hour)
        .where('minute', isEqualTo: minute)
        .get();

    int totalCongestion = 0;
    int numberOfMatchingDocuments = snapshot.docs.length;

    if (numberOfMatchingDocuments > 0) {
      // ë§¤ì¹­ë˜ëŠ” ë¬¸ì„œë“¤ì˜ cong ê°’ í•©ì‚°
      for (var doc in snapshot.docs) {
        totalCongestion += doc['cong'] as int;
      }

      print('ì¼ì¹˜í•˜ëŠ” ë¬¸ì„œ ìˆ˜: $numberOfMatchingDocuments');
      print('ì´ í˜¼ì¡ë„ ê°’: $totalCongestion');

      return totalCongestion ~/ numberOfMatchingDocuments;
    } else {
      return -1;
    }
  }
```

ìœ„ì˜ congë¥¼ ì œì™¸í•œ Congestionì»¬ë ‰ì…˜ì˜ í•„ë“œê°’ë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ í˜¼ì¡ë„ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ í˜¼ì¡ë„ë¥¼ ë¬¸ì„œì˜ ê°œìˆ˜ë¡œ ë‚˜ëˆ„ì–´ì„œ í˜¼ì¡ë„ì˜ í‰ê· ì„ êµ¬í•©ë‹ˆë‹¤.
